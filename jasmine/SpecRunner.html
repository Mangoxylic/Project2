<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Jasmine Spec Runner v2.5.2</title>

	<link rel="shortcut icon" type="image/png" href="lib/jasmine-2.5.2/jasmine_favicon.png">
	<link rel="stylesheet" href="lib/jasmine-2.5.2/jasmine.css">

	<script type="text/javascript" src="lib/jquery-1.10.2.min.js"></script>

	<script src="lib/jasmine-2.5.2/jasmine.js"></script>
	<script src="lib/jasmine-2.5.2/jasmine-html.js"></script>
	<script src="lib/jasmine-2.5.2/boot.js"></script>
	<script src="lib/jasmine-jquery.js"></script>

	<script type="text/javascript" src="lib/html2canvas.js"></script>

	<!-- include source files here... -->
	<script>
	var spyEvent;

	describe('Download image of word cloud functionality works', function() {
		beforeEach(function() {
			loadFixtures('index.html');
			spyEvent = spyOnEvent('#imageButton', 'click');
		}); 

		it('Clicking the Download Image of Cloud button works', function() {
			$('#imageButton').click();
			expect(spyEvent).toHaveBeenTriggered();
		});

		it('Downloads the image of the word cloud', function() {
			var wordcloud;
			wordcloud = document.getElementById("cloudBox");

			expect(wordcloud).not.toEqual(undefined);

			var image;
			html2canvas(wordcloud, {
				onrendered: function(canvas) {
				image = canvas.toDataURL("image/png");
				window.open(image);
				}
			});
			expect(image).not.toEqual(null);
		});
	});
	</script>

	<!-- include spec files here... -->


</head>

<body>
</body>
</html>
